{"version":3,"sources":["webpack:///./src/utils/dagUtils.js","webpack:///./src/components/Dag.vue?6a88","webpack:///./src/components/Dag.vue","webpack:///src/components/DagMaker.vue","webpack:///./src/components/DagMaker.vue?a1c5","webpack:///./src/components/DagMaker.vue","webpack:///src/App.vue","webpack:///./src/App.vue?2bda","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///src/components/Dag.vue"],"names":["graphId","parseInt","Math","random","max_safe_integer_default","a","toString","slice","stringifyStyle","style","keys_default","map","key","reduce","p","c","d3DagGraph","graph","options","d3Graph","dagre_d3_default","graphlib","Graph","setGraph","nodes","links","forEach","node","setNode","id","defaultOption","label","String","shape","assign_default","rx","ry","stroke","fill","stroke-width","labelStyle","font-weight","font-family","font-size","nodeOptions","link","setEdge","from","to","defaultOptions","arrowhead","labelpos","curve","d3_shape","background","border-radius","padding","arrowheadStyle","linkOptions","setBackgroundForText","el","document","querySelectorAll","textEl","elem","bounds","getBBox","width","height","createElementNS","getComputedStyle","paddingTop","paddingLeft","paddingRight","paddingBottom","setAttribute","x","y","hasAttribute","getAttribute","parentNode","insertBefore","setBackgroundFor","calculateOffset","defaultOffset","offset","containerLength","graphLength","is_integer_default","renderDag","svg","querySelector","Error","tagName","tag","g","innerHTML","appendChild","rankdir","align","undefined","dagUtils_graphOptions","typeof_default","Array","isArray","every","nodeIds","set_default","has","validateGraph","err","console","log","message","render","group","d3_selection","graphOptions","_document$querySelect","getBoundingClientRect","svgWidth","svgHeight","_graph$graph","graphWidth","graphHeight","xOffset","yOffset","is_finite_default","zoom","d3_zoom","on","attr","transform","call","translate","setInitOffsetAndZoom","components_Dag","_obj","_h","this","$createElement","_self","_c","ref","class","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","initialEditorValue","DagMaker","name","components","Dag","normalizeComponent","data","resizeListenerId","fullScreen","editorValue","methods","displayFullScreen","renderEditor","_this","editor","editor_api","create","$refs","value","language","automaticLayout","scrollBeyondLastLine","theme","fontSize","minimap","enabled","onDidChangeModelContent","e","getValue","mounted","components_DagMaker","_vm","staticClass","inactive","_v","attrs","click","App","DagMaker_normalizeComponent","selectortype_template_index_0_src_App","src_App","App_normalizeComponent","vue_esm","config","productionTip","template","__webpack_exports__","props","watch","Object","__WEBPACK_IMPORTED_MODULE_0__utils_dagUtils__","startsWith","eval"],"mappings":"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","file":"static/js/app.7a998bad13646b384f08.js","sourcesContent":["import dagreD3 from 'dagre-d3'\nimport * as d3 from './dagD3importer'\n\n\n/**\n * Generate a graphId for the graph to support multi graph rendering\n */\nfunction graphId () {\n  return parseInt((1 + Math.random()) * (Number.MAX_SAFE_INTEGER / 2)).toString(16).slice(0, 8)\n}\n\nfunction createSvgElement (tag) {\n  const svgns = 'http://www.w3.org/2000/svg'\n  return document.createElementNS(svgns, tag)\n}\n\n/**\n * Stringify the style object to generate valid input for dagreD3\n */\nfunction stringifyStyle (style) {\n  if (!style) return null\n  return Object.keys(style)\n    .map(key => `${key}: ${style[key]};`)\n    .reduce((p, c) => p + c, '')\n}\n\n/**\n * Generate options for the graph\n */\nfunction graphOptions (options) {\n  const rankdirOptions = ['TB', 'LR', 'BT', 'RL']\n  const alignOptions = ['UL', 'UR', 'DL', 'DR']\n  const defaultOptions = {\n    rankdir: 'TB',\n    align: undefined\n  }\n  if (!options) return defaultOptions\n  else return Object.assign(defaultOptions, options)\n}\n\n/**\n * TODO: More friendly error message.\n * @param {object} graph \n */\nfunction validateGraph (graph) {\n  if (!graph || typeof graph !== 'object') {\n    throw new Error('Input graph is not an object.')\n  }\n  if (graph.options && typeof graph.options !== 'object') {\n    throw new Error('Options of the graph is not an object.')\n  }\n  const { nodes, links } = graph\n  if (!Array.isArray(links)) {\n    throw new Error('`links` of the graph is not an Array.')\n  }\n  if (!Array.isArray(nodes)) {\n    throw new Error('`nodes` of the graph is not an Array.')\n  }\n  if (!nodes.every(node => node.id)) {\n    throw new Error('Some nodes don\\'t have `id` property.')\n  }\n  if (!links.every(link => (link.from && link.to))) {\n    throw new Error('Some links don\\'t have `from` or `to` property.')\n  }\n  const nodeIds = new Set(nodes.map(node => node.id))\n  if (!links.every(link => nodeIds.has(link.from) && nodeIds.has(link.to))) {\n    throw new Error('Some links\\' vertexes don\\'t appear in nodes.')\n  }\n  return graph\n}\n\n/**\n * Generate node's options based on default node options\n */\nfunction nodeOptions (node) {\n  const shapeOptions = ['rect', 'circle', 'ellipse', 'diamond']\n  const defaultStyle = {\n    rx: '5px',\n    ry: '5px',\n    stroke: '#8cc9d6',\n    fill: '#c8e4ea',\n    'stroke-width': '1.5px'\n  }\n  const defaultLabelStyle = {\n    'font-weight': '500',\n    'font-family': \"'Helvetica Neue', Helvetica, Arial, sans-serf\",\n    'font-size': '14px'\n  }\n  const defaultOption = {\n    label: String(node.id),\n    shape: node.shape ? node.shape : shapeOptions[0]\n  }\n  return Object.assign(defaultOption, node, {\n    style: stringifyStyle(Object.assign(defaultStyle, node.style)),\n    labelStyle: stringifyStyle(Object.assign(defaultLabelStyle, node.labelStyle)),\n  })\n}\n\n/**\n * Generate link's options based on default link options\n */\nfunction linkOptions (link) {\n  const curveOptions = ['curveBasis', 'curveLinear', 'curveMonotoneX',\n    'curveMonotoneY', 'curveStep', 'curveNatural', 'curveBundle',\n    'curveCatmullRom']\n  const arrowheadOptions = ['normal', 'vee', 'undirected']\n  const labelposOptions = ['c', 'l', 'r']\n  const defaultStyle = {\n    fill: 'none',\n    stroke: '#ededed',\n    'stroke-width': '1.5px'\n  }\n  const defaultLabelStyle = {\n    'font-weight': '500',\n    'font-family': \"'Helvetica Neue', Helvetica, Arial, sans-serf\",\n    'font-size': '14px',\n    background: '#ededed',\n    'border-radius': '4px',\n    padding: '4px 8px 5px 8px'\n  }\n  const defaultArrawheadStyle = {\n    fill: '#ededed',\n  }\n  const defaultOptions = {\n    label: '',\n    arrowhead: arrowheadOptions[0],\n    labelpos: labelposOptions[0],\n    curve: d3['curveBasis'],\n    \n  }\n  return Object.assign(defaultOptions, link, {\n    style: stringifyStyle(Object.assign(defaultStyle, link.style)),\n    labelStyle: stringifyStyle(Object.assign(defaultLabelStyle, link.labelStyle)),\n    arrowheadStyle: stringifyStyle(Object.assign(defaultArrawheadStyle, link.arrowheadStyle))\n  })\n}\n\n/**\n * Polyfill background related styles for a svg element\n */\nfunction setBackgroundFor (elem) {\n  const svgns = 'http://www.w3.org/2000/svg'\n  const bounds = elem.getBBox()\n  if (!bounds.width && !bounds.height) return\n  const background = document.createElementNS(svgns, 'rect')\n  const style = getComputedStyle(elem)\n  const paddingTop = parseInt(style['padding-top'], 10)\n  const paddingLeft = parseInt(style['padding-left'], 10)\n  const paddingRight = parseInt(style['padding-right'], 10)\n  const paddingBottom = parseInt(style['padding-bottom'], 10)\n  background.setAttribute('x', bounds.x - parseInt(style['padding-left'], 10))\n  background.setAttribute('y', bounds.y - parseInt(style['padding-top'], 10))\n  background.setAttribute('width', bounds.width + paddingLeft + paddingRight)\n  background.setAttribute('height', bounds.height + paddingTop + paddingBottom)\n  background.setAttribute('fill', style['background-color'])\n  background.setAttribute('rx', style['border-radius'])\n  background.setAttribute('stroke-width', style['border-top-width'])\n  background.setAttribute('stroke', style['border-top-color'])\n  if (elem.hasAttribute('transform')) {\n    background.setAttribute('transform', elem.getAttribute('transform'))\n  }\n  elem.parentNode.insertBefore(background, elem)\n}\n\n/**\n * Generate a d3 dag graph based on input graph and options\n */\nfunction d3DagGraph (graph, options) {\n  const d3Graph = new dagreD3.graphlib.Graph().setGraph(options)\n  const { nodes, links } = graph\n  nodes.forEach(node => d3Graph.setNode(node.id, nodeOptions(node)))\n  links.forEach(link => d3Graph.setEdge(link.from, link.to, linkOptions(link)))\n  return d3Graph\n}\n\n/**\n * \n * @param {string} el selector for svg\n */\nfunction setBackgroundForText (el) {\n  const textEls = document.querySelectorAll(`${el} text`)\n  textEls.forEach(textEl => setBackgroundFor(textEl))\n}\n\nfunction calculateOffset (defaultOffset, offset, containerLength, graphLength) {\n  if (typeof offset === 'function') {\n    return offset(containerLength, graphLength)\n  } else if (Number.isInteger(offset)) {\n    return offset\n  }\n  if (typeof defaultOffset === 'function') {\n    return defaultOffset(containerLength, graphLength)\n  }\n  return defaultOffset\n}\n\n/**\n *\n * @param {Element} group \n * @param {object} graph \n * @param {string} el selector for svg\n */\nfunction setInitOffsetAndZoom (group, graph, el, graphOptions) {\n  const svg = d3.select(el)\n  const { width: svgWidth, height: svgHeight } = document.querySelector(el).getBoundingClientRect()\n  const { width: graphWidth, height: graphHeight } = graph.graph()\n  const xOffset = calculateOffset((svgWidth - graphWidth) / 2, graphOptions.xOffset, svgWidth, graphWidth)\n  const yOffset = calculateOffset(60, graphOptions.yOffset, svgHeight, graphHeight)\n  /** When there is no node, graphWidth is -Infinity */\n  if (!Number.isFinite(xOffset)) return\n  const zoom = d3.zoom().on('zoom', () => {\n    group.attr('transform', d3.event.transform)\n  })\n  svg.call(zoom)\n  svg.call(zoom.transform, d3.zoomIdentity.translate(xOffset, yOffset))\n  group.attr('transform', `translate(${xOffset}, ${yOffset})`)\n}\n\n/**\n * @param {string} el selector for svg\n */\nfunction renderDag (el, graph) {\n  const svg = document.querySelector(el)\n  {\n    /** Validate selected element */\n    if (!svg) throw Error(`No element is selected using \\`${el}\\`.`)\n    else if (svg && svg.tagName !== 'svg') throw Error(`Selected element's tag is not \\'svg\\'.`)\n  }\n  {\n    /** Clean svg and append a group to it */\n    const g = createSvgElement('g')\n    svg.innerHTML = \"\"\n    svg.appendChild(g)\n  }\n  let options = graphOptions(graph.options)\n  try {\n    /** convert input graph to a D3 graph */\n    graph = d3DagGraph(validateGraph(graph), options)\n  } catch (err) {\n    console.log('catch', err.message)\n    return\n  }\n  {\n    /** Render the graph */\n    const render = new dagreD3.render()\n    const group = d3.select(`${el} > g`)\n    render(group, graph)\n    setInitOffsetAndZoom(group, graph, el, options)\n  }\n  /** Set background for labels of links */\n  setBackgroundForText(el)\n}\n\nexport {\n  graphId,\n  renderDag\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/dagUtils.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{ref:\"svg\",class:( _obj = {}, _obj[(\"graph-\" + _vm.graphId)] = true, _obj )})\nvar _obj;}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e1e4a4f2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Dag.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e1e4a4f2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Dag.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Dag.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Dag.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e1e4a4f2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Dag.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e1e4a4f2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Dag.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"main-panel\">\n    <div class=\"control-panel\" ref=\"editor\" :class=\"{ inactive: fullScreen }\"></div>\n    <div class=\"dag-panel\">\n      <dag :graph=\"editorValue\"/>\n    </div>\n    <button @click=\"displayFullScreen\" class=\"full-screen-button\" v-if=\"!fullScreen\">全屏</button>\n    <button @click=\"displayFullScreen\" class=\"full-screen-button\" v-else>关闭全屏</button>\n  </div>\n</template>\n\n<script>\nimport 'monaco-editor/esm/vs/editor/browser/controller/coreCommands.js'\nimport 'monaco-editor/esm/vs/editor/contrib/find/findController.js'\nimport * as monaco from 'monaco-editor/esm/vs/editor/editor.api.js'\nimport 'monaco-editor/esm/vs/basic-languages/javascript/javascript.contribution'\nimport Dag from \"./Dag\";\n\nconst initialEditorValue = `graph = {\n  /**\n   * for more graph options, node options, link options\n   * see https://github.com/dagrejs/dagre/wiki#configuring-the-layout\n   * and https://github.com/dagrejs/dagre-d3/wiki#demos\n   */\n  options: {\n    xOffset (svgWidth, graphWidth) {\n      return 600 + (svgWidth - 600 - graphWidth) / 2\n    },\n    yOffset (svgHeight, graphHeight) {\n      return 60\n    },\n    align: void 0, /** 'UL', 'UR', 'DL', 'DR', undefined */\n    rankdir: 'TB', /** 'TB', 'LR', 'BT', 'RL' */\n    // ranker: 'longest-path', /** network-simplex, tight-tree, longest-path */\n    nodesep: 100,\n    ranksep: 100,\n    edgesep: 100\n  },\n  nodes: [\n    {\n      id: 1,\n      label: \"hello\",\n      shape: \"circle\",\n      height: 150,\n      style: {\n        \"stroke-width\": \"4px\",\n        stroke: \"red\",\n        fill: \"yellow\",\n      },\n      labelStyle: {\n        \"font-size\":\n        \"50px\",\n        \"font-style\": \"italic\",\n        \"text-decoration\": \"underline\"\n      }\n    },\n    {\n      id: 2,\n      label: \"world\",\n      width: 90,\n      style: {\n        rx: \"10px\",\n        ry: \"5px\"\n      }\n    },\n    {\n      id: 3,\n      label: \"jsfuck\",\n      shape: \"circle\",\n    },\n    { id: 4, label: \"js\"}\n  ],\n  links: [\n    {\n      from: 1, to: 3,\n      labelpos: 'l',\n      labeloffset: 10,\n      label: \"arrowhead: vee\",\n      arrowhead: \"vee\"\n    },\n    {\n      from: 2, to: 3,\n      label: \"costum label style\",\n      arrowhead: \"vee\",\n      labelStyle: {\n        \"background-color\": \"red\",\n        \"border-radius\": 0,\n        padding: 10\n      }\n    },\n    {\n      from: 3,\n      to: 4,\n      label: \"eggplant\",\n      arrowhead: \"normal\"\n    },\n    {\n      from: 4,\n      to: 1,\n      weight: 1,\n      label: \"arrowhead: undirected\",\n      arrowhead: \"undirected\"\n    }\n  ]\n}`\n\nexport default {\n  name: \"DagMaker\",\n  components: {\n    Dag\n  },\n  data() {\n    return {\n      resizeListenerId: null,\n      fullScreen: false,\n      editorValue: initialEditorValue\n    };\n  },\n  methods: {\n    displayFullScreen() {\n      this.fullScreen = !this.fullScreen;\n    },\n    renderEditor() {\n      const editor = monaco.editor.create(this.$refs.editor, {\n        value: initialEditorValue,\n        language: \"javascript\",\n        automaticLayout: true,\n        scrollBeyondLastLine: false,\n        theme: \"vs-dark\",\n        fontSize: 14,\n        minimap: {\n          enabled: false\n        }\n      })\n      editor.onDidChangeModelContent(e => {\n        this.editorValue = editor.getValue()\n      });\n    }\n  },\n  mounted() {\n    this.renderEditor();\n  }\n};\n</script>\n\n<style scoped>\n.main-panel {\n  position: fixed;\n  display: flex;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n\n.control-panel {\n  position: absolute;\n  left: 0;\n  top: 0;\n  height: 100vh;\n  width: 700px;\n  transition: transform .5s ease-in-out;\n}\n.control-panel.inactive {\n  transform: translateX(-100%);\n}\n\n.dag-panel {\n  flex-grow: 1;\n  height: 100vh;\n}\n\n.full-screen-button {\n  position: absolute;\n  top: 14px;\n  right: 14px;\n  background-color: #fff;\n  border: 1px solid #dcdfe6;\n  font-size: 14px;\n  cursor: pointer;\n  padding: 12px 20px;\n  border-radius: 4px;\n  transition: .1s;\n  font-weight: 500;\n  outline: none;\n  transition: .1s;\n}\n.full-screen-button:hover {\n  color: #409eff;\n  border-color: #c6e2ff;\n  background-color: #ecf5ff;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/DagMaker.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-panel\"},[_c('div',{ref:\"editor\",staticClass:\"control-panel\",class:{ inactive: _vm.fullScreen }}),_vm._v(\" \"),_c('div',{staticClass:\"dag-panel\"},[_c('dag',{attrs:{\"graph\":_vm.editorValue}})],1),_vm._v(\" \"),(!_vm.fullScreen)?_c('button',{staticClass:\"full-screen-button\",on:{\"click\":_vm.displayFullScreen}},[_vm._v(\"全屏\")]):_c('button',{staticClass:\"full-screen-button\",on:{\"click\":_vm.displayFullScreen}},[_vm._v(\"关闭全屏\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0f137e97\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/DagMaker.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f137e97\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./DagMaker.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DagMaker.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DagMaker.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0f137e97\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./DagMaker.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0f137e97\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/DagMaker.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <dag-maker/>\n  </div>\n</template>\n\n<script>\nimport DagMaker from './components/DagMaker'\n\nexport default {\n  name: 'App',\n  components: {\n    DagMaker\n  }\n}\n</script>\n\n<style>\nbody {\n  margin: 0;\n}\n\n#app {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('dag-maker')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-bb0c9590\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bb0c9590\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bb0c9590\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","<template>\n  <svg :class=\"{ [`graph-${graphId}`]: true }\" ref=\"svg\">\n  </svg>\n</template>\n\n<script>\nimport {\n  graphId,\n  renderDag\n} from '@/utils/dagUtils'\n\n/**\n * @prop {object} graph\n */\nexport default {\n  name: 'dag',\n  props: ['graph'],\n  watch: {\n    graph: function () {\n      this.renderDag()\n    }\n  },\n  data: function () {\n    return {\n      graphId: graphId()\n    }\n  },\n  methods: {\n    renderDag () {\n      let graph = this.graph\n      if (typeof this.graph === 'string') {\n        try {\n          if (this.graph.startsWith('{')) graph = eval(`graph = ${this.graph}`)\n          else graph = eval(`${this.graph}`)\n        } catch (err) {\n          console.log('parsing error')\n          return\n        }\n      }\n      renderDag(`svg.graph-${this.graphId}`, graph)\n    }\n  },\n  mounted () {\n    this.renderDag()\n  }\n}\n</script>\n\n<style scoped>\nsvg {\n  width: 100%;\n  height: 100%;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Dag.vue"],"sourceRoot":""}